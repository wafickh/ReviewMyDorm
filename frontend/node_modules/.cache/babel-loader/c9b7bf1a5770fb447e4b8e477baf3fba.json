{"ast":null,"code":"import * as React from 'react';\nimport { forwardRef, useImperativeHandle, useRef, useEffect } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nconst GeolocateControl = forwardRef((props, ref) => {\n  const thisRef = useRef({\n    props\n  });\n  const ctrl = useControl(({\n    mapLib\n  }) => {\n    const gc = new mapLib.GeolocateControl(props); // Hack: fix GeolocateControl reuse\n    // When using React strict mode, the component is mounted twice.\n    // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n\n    const setupUI = gc._setupUI;\n\n    gc._setupUI = args => {\n      if (!gc._container.hasChildNodes()) {\n        setupUI(args);\n      }\n    };\n\n    gc.on('geolocate', e => {\n      var _a, _b;\n\n      (_b = (_a = thisRef.current.props).onGeolocate) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    });\n    gc.on('error', e => {\n      var _a, _b;\n\n      (_b = (_a = thisRef.current.props).onError) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    });\n    gc.on('outofmaxbounds', e => {\n      var _a, _b;\n\n      (_b = (_a = thisRef.current.props).onOutOfMaxBounds) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    });\n    gc.on('trackuserlocationstart', e => {\n      var _a, _b;\n\n      (_b = (_a = thisRef.current.props).onTrackUserLocationStart) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    });\n    gc.on('trackuserlocationend', e => {\n      var _a, _b;\n\n      (_b = (_a = thisRef.current.props).onTrackUserLocationEnd) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    });\n    return gc;\n  }, {\n    position: props.position\n  });\n  thisRef.current.props = props;\n  useImperativeHandle(ref, () => ({\n    trigger: () => ctrl.trigger()\n  }), []);\n  useEffect(() => {\n    // @ts-ignore\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n  return null;\n});\nGeolocateControl.displayName = 'GeolocateControl';\nexport default React.memo(GeolocateControl);","map":{"version":3,"sources":["../../../src/components/geolocate-control.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import * as React from 'react';\nimport { forwardRef, useImperativeHandle, useRef, useEffect } from 'react';\nimport { applyReactStyle } from '../utils/apply-react-style';\nimport useControl from './use-control';\nconst GeolocateControl = forwardRef((props, ref) => {\n    const thisRef = useRef({ props });\n    const ctrl = useControl(({ mapLib }) => {\n        const gc = new mapLib.GeolocateControl(props);\n        // Hack: fix GeolocateControl reuse\n        // When using React strict mode, the component is mounted twice.\n        // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n        const setupUI = gc._setupUI;\n        gc._setupUI = args => {\n            if (!gc._container.hasChildNodes()) {\n                setupUI(args);\n            }\n        };\n        gc.on('geolocate', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onGeolocate) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('error', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onError) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('outofmaxbounds', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onOutOfMaxBounds) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('trackuserlocationstart', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onTrackUserLocationStart) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        gc.on('trackuserlocationend', e => {\n            var _a, _b;\n            (_b = (_a = thisRef.current.props).onTrackUserLocationEnd) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n        return gc;\n    }, { position: props.position });\n    thisRef.current.props = props;\n    useImperativeHandle(ref, () => ({\n        trigger: () => ctrl.trigger()\n    }), []);\n    useEffect(() => {\n        // @ts-ignore\n        applyReactStyle(ctrl._container, props.style);\n    }, [props.style]);\n    return null;\n});\nGeolocateControl.displayName = 'GeolocateControl';\nexport default React.memo(GeolocateControl);\n//# sourceMappingURL=geolocate-control.js.map"]},"metadata":{},"sourceType":"module"}