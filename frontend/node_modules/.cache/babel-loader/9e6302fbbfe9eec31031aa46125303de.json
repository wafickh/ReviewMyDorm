{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\WebCourse\\\\DormCritique\\\\frontend\\\\src\\\\pages\\\\AddDorm\\\\AddDorm.jsx\";\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport Footer from '../../components/footer/Footer';\nimport Navbar from '../../components/navbar/Navbar';\nimport \"./AddDorm.css\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport ReactMapGL, { Marker } from \"react-map-gl\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getSchoolByName } from '../../actions/school';\nimport mapboxgl from \"mapbox-gl\";\nconst schema = yup.object().shape({\n  DormName: yup.string().required('This field is required').min(3).max(50),\n  Price: yup.number().required().test('no-leading-zero', 'Leading zero is not allowed', (value, context) => {\n    return context.originalValue && !context.originalValue.startsWith('0');\n  })\n});\nmapboxgl.accessToken = \"pk.eyJ1Ijoid2FmaWNraCIsImEiOiJjbGNuZ2ttcnoxMm83M25zOTM0cGpkanlmIn0.8U0pDk8RKlhvQrxzgWsbxQ\";\n\nfunction AddDorm() {\n  var _errors$DormName, _errors$Price;\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const submitForm = data => {\n    //uploadImage\n    if (data.Deposit === \"\") {\n      delete data.Deposit;\n    }\n\n    if (data.length === \"\") {\n      delete data.length;\n    }\n\n    let fincheck = [];\n\n    for (let i = 0; i < checkboxs.length; i++) {\n      if (checkboxs[i].check === true) {\n        fincheck.push(checkboxs[i].name);\n      }\n    }\n\n    let finchecktype = [];\n\n    for (let i = 0; i < checkboxstype.length; i++) {\n      if (checkboxstype[i].check === true) {\n        finchecktype.push(checkboxstype[i].name);\n      }\n    }\n\n    if (message.length > 0) {\n      data = { ...data,\n        addinfo: message\n      };\n    }\n\n    const obj = { ...data,\n      long: long.current,\n      lat: lat.current,\n      fincheck,\n      finchecktype\n    };\n    console.log(obj);\n  };\n\n  const [Long, setLong] = useState(\"\");\n  const [Lat, setLat] = useState(\"\");\n  const mapContainerRef = useRef(null);\n  const lat = useRef(null);\n  const long = useRef(null);\n  const dispatch = useDispatch();\n  let {\n    id\n  } = useParams();\n  console.log(id);\n  let nso = id.replaceAll('_', ' ');\n  console.log(school);\n  const [school, setSchool] = useState();\n  setSchool(useSelector(state => state.school));\n  useEffect(() => {\n    dispatch(getSchoolByName(id));\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: \"mapbox://styles/mapbox/streets-v11?optimize=true\",\n      //long then lat\n      center: [33, 33.892371],\n      zoom: 15.9,\n      maxZoom: 19\n    });\n    if (mapContainerRef.current.style.visibility === true) map.resize();\n    let mapMarkers = [];\n    map.on('click', e => {\n      mapMarkers.forEach(marker => marker.remove());\n      const marker = new mapboxgl.Marker({\n        color: \"#562F4A\"\n      });\n      marker.setLngLat(e.lngLat).addTo(map);\n      mapMarkers.push(marker);\n      console.log(\"lng:\" + marker._lngLat.lng + \"     Lat:\" + marker._lngLat.lat);\n      long.current = marker._lngLat.lng;\n      lat.current = marker._lngLat.lat;\n      console.log(lat);\n    });\n  }, [dispatch]);\n  const [checkboxstype, setCheckboxstype] = useState([{\n    id: 70,\n    name: 'Single',\n    check: false\n  }, {\n    id: 71,\n    name: 'Double shared',\n    check: false\n  }]);\n  const [checkboxs, setCheckboxs] = useState([{\n    id: 1,\n    name: 'Cleaning service',\n    check: false\n  }, {\n    id: 2,\n    name: 'Unlimited Wifi',\n    check: false\n  }, {\n    id: 3,\n    name: 'Shared lounge',\n    check: false\n  }, {\n    id: 4,\n    name: 'Hot water',\n    check: false\n  }, {\n    id: 5,\n    name: 'Hygiene Hose (shattafe)',\n    check: false\n  }, {\n    id: 6,\n    name: 'Joint kitchen',\n    check: false\n  }, {\n    id: 7,\n    name: 'Guests allowed',\n    check: false\n  }, {\n    id: 8,\n    name: 'Sleepovers',\n    check: false\n  }, {\n    id: 9,\n    name: 'Pet friendly',\n    check: false\n  }, {\n    id: 10,\n    name: '24/7 security',\n    check: false\n  }, {\n    id: 11,\n    name: 'Laundry',\n    check: false\n  }, {\n    id: 12,\n    name: 'Electricity 24/7',\n    check: false\n  }, {\n    id: 13,\n    name: 'AC',\n    check: false\n  }, {\n    id: 14,\n    name: 'Chauffage',\n    check: false\n  }]);\n\n  const handleCheck = id => {\n    setCheckboxs(prev => {\n      return prev.map(item => {\n        if (item.id === id) {\n          return { ...item,\n            check: !item.check\n          };\n        } else {\n          return { ...item\n          };\n        }\n      });\n    });\n  };\n\n  const handleChecktype = id => {\n    setCheckboxstype(prev => {\n      return prev.map(item => {\n        if (item.id === id) {\n          return { ...item,\n            check: !item.check\n          };\n        } else {\n          return { ...item\n          };\n        }\n      });\n    });\n  };\n\n  const rendertype = () => {\n    return checkboxstype.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pr chich inpt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inppr\",\n      key: item.id,\n      onClick: () => handleChecktype(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: item.name,\n      id: item.id,\n      value: item.check,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    }), item.check && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"before\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"after\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }\n    }, \"\\u2714\"))), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, item.name)));\n  };\n\n  const renderCheckboxs = () => {\n    return checkboxs.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pr chich inpt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inppr\",\n      key: item.id,\n      onClick: () => handleCheck(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: item.name,\n      id: item.id,\n      value: item.check,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }), item.check && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"before\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"after\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 25\n      }\n    }, \"\\u2714\"))), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    }, item.name)));\n  };\n\n  const renderfilterstype = () => {\n    return checkboxstype.map(item => {\n      if (item.check) {\n        {\n          console.log(item.check);\n        }\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sax rounded-3\",\n          key: item.id,\n          onClick: () => handleChecktype(item.id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 21\n          }\n        }, item.name, \"  \\u2718\");\n      } else {\n        return null;\n      }\n    });\n  };\n\n  const renderfilters = () => {\n    return checkboxs.map(item => {\n      if (item.check) {\n        {\n          console.log(item.check);\n        }\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sax rounded-3\",\n          key: item.id,\n          onClick: () => handleCheck(item.id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 21\n          }\n        }, item.name, \"  \\u2718\");\n      } else {\n        return null;\n      }\n    });\n  };\n\n  const [message, setMessage] = useState('');\n\n  const handleMessageChange = event => {\n    setMessage(event.target.value);\n  };\n\n  const [imageSelected, setImageSelected] = useState(\"\"); // const uploadImage = (files) => {\n  //     const formData = new FormData()\n  //     formData.append(\"file\", files[0]);\n  //     formData.append(\"upload_preset\",\"xw4yrog1\");\n  //     Axios.post(\"https://api.cloudinary.com/v1_1/do0puhubq/image/upload\",\n  //     formData).then((response)=>{\n  //         console.log(response);\n  //     });\n  // };\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bud\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bod\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    onSubmit: handleSubmit(submitForm),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 29\n    }\n  }, \"Add a dorm\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 29\n    }\n  }, \"Enter the full name, contract information, Location, and image/s of the dorm you would like to add.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp headm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 29\n    }\n  }, \"Dorme name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    autocomplete: \"off\",\n    name: \"DormName\",\n    id: \"Dormname\",\n    placeholder: \"Dorm name\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 29\n    }\n  }, (_errors$DormName = errors.DormName) === null || _errors$DormName === void 0 ? void 0 : _errors$DormName.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contractInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 29\n    }\n  }, \"Contract Information\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexxx\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 37\n    }\n  }, \"Rent per month ($) \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Price\",\n    autocomplete: \"off\",\n    placeholder: \"$\",\n    id: \"Price\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 37\n    }\n  }, ((_errors$Price = errors.Price) === null || _errors$Price === void 0 ? void 0 : _errors$Price.message) ? \"Price must be a valid Number\" : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 37\n    }\n  }, \"Deposit ($) \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Deposit\",\n    autocomplete: \"off\",\n    placeholder: \"$\",\n    id: \"Price\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 33\n    }\n  }, \"Contract length (in months) \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"length\",\n    autocomplete: \"off\",\n    placeholder: \"\",\n    id: \"Price\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inpt in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 33\n    }\n  }, \"Dorm Type\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"filters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 33\n    }\n  }, renderfilterstype()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"thingy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 33\n    }\n  }, \" \", rendertype())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addinfo \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 33\n    }\n  }, \"Amenities (features)\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 33\n    }\n  }, renderfilters()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 33\n    }\n  }, renderCheckboxs())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addinfo inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 33\n    }\n  }, \"Additional Information (optional) \"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    id: \"w3review\",\n    name: \"w3review\",\n    rows: \"3\",\n    cols: \"50\",\n    style: {\n      padding: 10,\n      fontSize: 15\n    },\n    onChange: handleMessageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 29\n    }\n  }, \"Add pictures of your dorm\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"myFile\",\n    name: \"filename\",\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 29\n    }\n  }, \"Please Select the exact location of your dorm.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Map\",\n    ref: mapContainerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    id: \"long\",\n    name: \"long\",\n    value: long.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    id: \"Lat\",\n    name: \"Lat\",\n    value: lat.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 29\n    }\n  }, \"\\xAB Back\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"continue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 29\n    }\n  }, \"Submit \\xBB\"))))));\n}\n\nexport default AddDorm;","map":{"version":3,"sources":["C:/Users/USER/OneDrive/Desktop/WebCourse/DormCritique/frontend/src/pages/AddDorm/AddDorm.jsx"],"names":["React","useRef","useEffect","useCallback","useState","Footer","Navbar","useForm","yupResolver","yup","ReactMapGL","Marker","useNavigate","useParams","useSelector","useDispatch","getSchoolByName","mapboxgl","schema","object","shape","DormName","string","required","min","max","Price","number","test","value","context","originalValue","startsWith","accessToken","AddDorm","register","handleSubmit","errors","resolver","submitForm","data","Deposit","length","fincheck","i","checkboxs","check","push","name","finchecktype","checkboxstype","message","addinfo","obj","long","current","lat","console","log","Long","setLong","Lat","setLat","mapContainerRef","dispatch","id","nso","replaceAll","school","setSchool","state","map","Map","container","style","center","zoom","maxZoom","visibility","resize","mapMarkers","on","e","forEach","marker","remove","color","setLngLat","lngLat","addTo","_lngLat","lng","setCheckboxstype","setCheckboxs","handleCheck","prev","item","handleChecktype","rendertype","renderCheckboxs","renderfilterstype","renderfilters","setMessage","handleMessageChange","event","target","imageSelected","setImageSelected","padding","fontSize"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react'\r\nimport Footer from '../../components/footer/Footer'\r\nimport Navbar from '../../components/navbar/Navbar'\r\nimport \"./AddDorm.css\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport * as yup from \"yup\";\r\nimport ReactMapGL, {\r\n    Marker,\r\n\r\n} from \"react-map-gl\"\r\n\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { getSchoolByName } from '../../actions/school'\r\n\r\nimport mapboxgl from \"mapbox-gl\";\r\nconst schema = yup.object().shape({\r\n    DormName: yup.string().required('This field is required').min(3).max(50),\r\n    Price: yup.number().required().test(\r\n        'no-leading-zero',\r\n        'Leading zero is not allowed',\r\n        (value, context) => {\r\n            return context.originalValue && !context.originalValue.startsWith('0');\r\n        }\r\n    ),\r\n\r\n\r\n})\r\n\r\nmapboxgl.accessToken = \"pk.eyJ1Ijoid2FmaWNraCIsImEiOiJjbGNuZ2ttcnoxMm83M25zOTM0cGpkanlmIn0.8U0pDk8RKlhvQrxzgWsbxQ\"\r\nfunction AddDorm() {\r\n    const { register, handleSubmit, errors } = useForm({\r\n        resolver: yupResolver(schema),\r\n    });\r\n\r\n    const submitForm = (data) => {\r\n        \r\n        //uploadImage\r\n        if (data.Deposit === \"\") {\r\n            delete data.Deposit;\r\n        }\r\n        if (data.length === \"\") {\r\n            delete data.length;\r\n        }\r\n        let fincheck = [];\r\n        for (let i = 0; i < checkboxs.length; i++) {\r\n            if (checkboxs[i].check === true) {\r\n                fincheck.push(checkboxs[i].name)\r\n            }\r\n        }\r\n        let finchecktype = [];\r\n        for (let i = 0; i < checkboxstype.length; i++) {\r\n            if (checkboxstype[i].check === true) {\r\n                finchecktype.push(checkboxstype[i].name)\r\n            }\r\n        }\r\n        if (message.length > 0) {\r\n            data = { ...data, addinfo: message }\r\n        }\r\n\r\n\r\n        const obj = { ...data, long: long.current, lat: lat.current, fincheck, finchecktype }\r\n        console.log(obj);\r\n\r\n\r\n    };\r\n    const [Long, setLong] = useState(\"\");\r\n    const [Lat, setLat] = useState(\"\");\r\n\r\n\r\n\r\n    const mapContainerRef = useRef(null);\r\n    const lat = useRef(null);\r\n\r\n    const long = useRef(null);\r\n    const dispatch = useDispatch()\r\n    let { id } = useParams();\r\n    console.log(id)\r\n    let nso = id.replaceAll('_', ' ')\r\n    console.log(school)\r\n   \r\n    const [school,setSchool]=useState();\r\n     setSchool(useSelector((state) => state.school))\r\n\r\n\r\n    useEffect(() => {\r\n        \r\n        dispatch(getSchoolByName(id));\r\n\r\n\r\n        const map = new mapboxgl.Map({\r\n            container: mapContainerRef.current,\r\n            style: \"mapbox://styles/mapbox/streets-v11?optimize=true\",\r\n            //long then lat\r\n            center: [33, 33.892371],\r\n            zoom: 15.9,\r\n            maxZoom: 19,\r\n\r\n        });\r\n\r\n\r\n        if (mapContainerRef.current.style.visibility === true) map.resize();\r\n\r\n        let mapMarkers = []\r\n\r\n\r\n\r\n        map.on('click', (e) => {\r\n            mapMarkers.forEach((marker) => marker.remove())\r\n            const marker = new mapboxgl.Marker({ color: \"#562F4A\" });\r\n            marker.setLngLat(e.lngLat).addTo(map);\r\n            mapMarkers.push(marker)\r\n            console.log(\"lng:\" + marker._lngLat.lng + \"     Lat:\" + marker._lngLat.lat);\r\n            long.current = marker._lngLat.lng\r\n            lat.current = marker._lngLat.lat\r\n\r\n\r\n\r\n            console.log(lat)\r\n        });\r\n\r\n    }, [dispatch ]);\r\n    const [checkboxstype, setCheckboxstype] = useState([\r\n        {\r\n            id: 70,\r\n            name: 'Single',\r\n            check: false\r\n        }, {\r\n            id: 71,\r\n            name: 'Double shared',\r\n            check: false\r\n        }\r\n\r\n    ])\r\n\r\n    const [checkboxs, setCheckboxs] = useState([\r\n        {\r\n            id: 1,\r\n            name: 'Cleaning service',\r\n            check: false\r\n        }, {\r\n            id: 2,\r\n            name: 'Unlimited Wifi',\r\n            check: false\r\n\r\n        }, {\r\n            id: 3,\r\n            name: 'Shared lounge',\r\n            check: false\r\n        }, {\r\n            id: 4,\r\n            name: 'Hot water',\r\n            check: false\r\n\r\n        }, {\r\n            id: 5,\r\n            name: 'Hygiene Hose (shattafe)',\r\n            check: false\r\n        }, {\r\n            id: 6,\r\n            name: 'Joint kitchen',\r\n            check: false\r\n\r\n        }, {\r\n            id: 7,\r\n            name: 'Guests allowed',\r\n            check: false\r\n        }, {\r\n            id: 8,\r\n            name: 'Sleepovers',\r\n            check: false\r\n\r\n        }, {\r\n            id: 9,\r\n            name: 'Pet friendly',\r\n            check: false\r\n\r\n        }, {\r\n            id: 10,\r\n            name: '24/7 security',\r\n            check: false\r\n\r\n        }, {\r\n            id: 11,\r\n            name: 'Laundry',\r\n            check: false\r\n\r\n        },\r\n        {\r\n            id: 12,\r\n            name: 'Electricity 24/7',\r\n            check: false\r\n\r\n        }, {\r\n            id: 13,\r\n            name: 'AC',\r\n            check: false\r\n\r\n        }, {\r\n            id: 14,\r\n            name: 'Chauffage',\r\n            check: false\r\n\r\n        },\r\n\r\n    ]);\r\n    const handleCheck = (id) => {\r\n        setCheckboxs((prev) => {\r\n            return prev.map((item) => {\r\n                if (item.id === id) {\r\n                    return { ...item, check: !item.check };\r\n                } else {\r\n                    return { ...item };\r\n                }\r\n            });\r\n        });\r\n    };\r\n    const handleChecktype = (id) => {\r\n        setCheckboxstype((prev) => {\r\n            return prev.map((item) => {\r\n                if (item.id === id) {\r\n                    return { ...item, check: !item.check };\r\n                } else {\r\n                    return { ...item };\r\n                }\r\n            });\r\n        });\r\n    };\r\n    const rendertype = () => {\r\n        return checkboxstype.map(item => (\r\n            <div className='pr chich inpt'>\r\n                <div className=\"inppr\" key={item.id} onClick={() => handleChecktype(item.id)} >\r\n                    <input type=\"checkbox\" name={item.name} id={item.id} value={item.check} />\r\n                    {item.check && (<>\r\n                        <div className=\"before\"></div>\r\n                        <div className=\"after\">✔</div>\r\n\r\n                    </>\r\n                    )}\r\n                </div>\r\n                <label htmlFor={item.id}>{item.name}</label>\r\n            </div>\r\n        ));\r\n\r\n    }\r\n    const renderCheckboxs = () => {\r\n        return checkboxs.map(item => (\r\n            <div className='pr chich inpt'>\r\n                <div className=\"inppr\" key={item.id} onClick={() => handleCheck(item.id)} >\r\n                    <input type=\"checkbox\" name={item.name} id={item.id} value={item.check} />\r\n                    {item.check && (<>\r\n                        <div className=\"before\"></div>\r\n                        <div className=\"after\">✔</div>\r\n\r\n                    </>\r\n                    )}\r\n                </div>\r\n                <label htmlFor={item.id}>{item.name}</label>\r\n            </div>\r\n        ));\r\n    };\r\n\r\n    const renderfilterstype = () => {\r\n        return checkboxstype.map((item) => {\r\n            if (item.check) {\r\n                { console.log(item.check) }\r\n                return (\r\n\r\n                    <span className='sax rounded-3' key={item.id} onClick={() => handleChecktype(item.id)}>{item.name}  ✘</span>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n    }\r\n    const renderfilters = () => {\r\n        return checkboxs.map((item) => {\r\n            if (item.check) {\r\n                { console.log(item.check) }\r\n                return (\r\n\r\n                    <span className='sax rounded-3' key={item.id} onClick={() => handleCheck(item.id)}>{item.name}  ✘</span>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n    }\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleMessageChange = event => {\r\n        setMessage(event.target.value);\r\n    };\r\n    const [imageSelected, setImageSelected]=useState(\"\");\r\n    // const uploadImage = (files) => {\r\n    //     const formData = new FormData()\r\n    //     formData.append(\"file\", files[0]);\r\n    //     formData.append(\"upload_preset\",\"xw4yrog1\");\r\n    //     Axios.post(\"https://api.cloudinary.com/v1_1/do0puhubq/image/upload\",\r\n    //     formData).then((response)=>{\r\n    //         console.log(response);\r\n    //     });\r\n    // };\r\n    \r\n\r\n    return (\r\n        <span className='bud'> \r\n\r\n            <Navbar />\r\n            <div className=\"bod\"> \r\n                <div className='card card7'>\r\n                    <form action=\"\" onSubmit={handleSubmit(submitForm)} >\r\n                        <div className='head'>\r\n                            <h1>Add a dorm</h1>\r\n                            <p>Enter the full name, contract information, Location, and image/s of the dorm you would like to add.</p>\r\n                        </div>\r\n                        <div className=\"inp headm\">\r\n                            <h4>Dorme name</h4>\r\n                            <input type=\"text\" autocomplete=\"off\" name=\"DormName\" id=\"Dormname\" placeholder='Dorm name' className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n                            <span className='error'>{errors.DormName?.message}</span>\r\n\r\n                        </div>\r\n                        <div className=\"contractInfo\">\r\n                            <h3>Contract Information</h3>\r\n                            <div className=\"flexxx\">\r\n                                <div className=\"inp prices1\">\r\n                                    <h4>Rent per month ($) </h4>\r\n\r\n                                    <input type=\"text\" name=\"Price\" autocomplete=\"off\" placeholder='$' id=\"Price\" className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n                                    <span className='error'>{errors.Price?.message ? \"Price must be a valid Number\" : \"\"}</span>\r\n\r\n                                </div>\r\n                                <div className=\"inp prices1\">\r\n                                    <h4>Deposit ($) </h4>\r\n\r\n                                    <input type=\"text\" name=\"Deposit\" autocomplete=\"off\" placeholder='$' id=\"Price\" className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                            <div className=\"inp prices1\">\r\n                                <h4>Contract length (in months) </h4>\r\n\r\n                                <input type=\"text\" name=\"length\" autocomplete=\"off\" placeholder='' id=\"Price\" className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n\r\n                            </div>\r\n                            <div className=\"inpt in\">\r\n                                <h4>Dorm Type</h4>\r\n                                <span className=\"filters\">\r\n                                    {renderfilterstype\r\n                                        ()}\r\n                                </span>\r\n                                <div className='thingy'> {rendertype()}</div>\r\n\r\n\r\n                            </div>\r\n                            <div className=\"addinfo \">\r\n                                <h4>Amenities (features)</h4>\r\n                                <div className=\"filters\">\r\n                                    {renderfilters\r\n                                        ()}\r\n                                </div>\r\n                                <div className=\"Check\">\r\n                                    {renderCheckboxs()}\r\n                                </div>\r\n\r\n\r\n\r\n                            </div>\r\n\r\n                            <div className=\"addinfo inp prices1\">\r\n                                <h4>Additional Information (optional) </h4>\r\n\r\n\r\n                                <textarea type=\"text\" id=\"w3review\" name=\"w3review\" rows=\"3\" cols=\"50\" style={{ padding: 10, fontSize: 15 }} onChange={handleMessageChange} >\r\n\r\n                                </textarea>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div className=\"pics\">\r\n                            <h3>Add pictures of your dorm</h3>\r\n                            <input type=\"file\" id=\"myFile\" name=\"filename\" multiple>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"location\">\r\n                            <h4>Please Select the exact location of your dorm.</h4>\r\n                            <div className=\"Map\" ref={mapContainerRef} >\r\n\r\n\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <input type=\"hidden\" id=\"long\" name=\"long\" value={long.current} />\r\n\r\n                        <input type=\"hidden\" id=\"Lat\" name=\"Lat\" value={lat.current} />\r\n\r\n                        <div className=\"buttons\">\r\n                            <button className='back'>&laquo; Back</button>\r\n                            <button type='submit' className='continue'>Submit &raquo;</button>\r\n\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </span>\r\n    )\r\n}\r\n\r\nexport default AddDorm\r\n"]},"metadata":{},"sourceType":"module"}