{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\OneDrive\\\\Desktop\\\\WebCourse\\\\DormCritique\\\\frontend\\\\src\\\\pages\\\\AddDorm\\\\AddDorm.jsx\";\nimport React, { useRef, useEffect, useCallback, useState } from 'react';\nimport Footer from '../../components/footer/Footer';\nimport Navbar from '../../components/navbar/Navbar';\nimport \"./AddDorm.css\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport ReactMapGL, { Marker } from \"react-map-gl\";\nimport * as actionType from '../../constants/actionTypes';\nimport decode from 'jwt-decode';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport { getSchoolByName } from '../../actions/school';\nimport { createDorm } from '../../actions/dorm';\nimport mapboxgl from \"mapbox-gl\";\nconst schema = yup.object().shape({\n  DormName: yup.string().required('This field is required').min(3).max(50),\n  Price: yup.number().required().test('no-leading-zero', 'Leading zero is not allowed', (value, context) => {\n    return context.originalValue && !context.originalValue.startsWith('0');\n  })\n});\nmapboxgl.accessToken = \"pk.eyJ1Ijoid2FmaWNraCIsImEiOiJjbGNuZ2ttcnoxMm83M25zOTM0cGpkanlmIn0.8U0pDk8RKlhvQrxzgWsbxQ\";\n\nfunction AddDorm() {\n  var _errors$DormName, _errors$Price;\n\n  const location = useLocation();\n  const [productImg, setProductImg] = useState(\"\");\n\n  const handleProductImageUpload = e => {\n    const file = e.target.files[0];\n    TransformFileData(file);\n    console.log(file);\n  };\n\n  const TransformFileData = file => {\n    const reader = new FileReader();\n\n    if (file) {\n      reader.readAsDataURL(file);\n\n      reader.onloadend = () => {\n        setProductImg(reader.result);\n      };\n    } else {\n      setProductImg(\"\");\n    }\n  };\n\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const submitForm = data => {\n    if (data.Deposit === \"\") {\n      delete data.Deposit;\n    }\n\n    if (data.length === \"\") {\n      delete data.length;\n    }\n\n    let fincheck = [];\n\n    for (let i = 0; i < checkboxs.length; i++) {\n      if (checkboxs[i].check === true) {\n        fincheck.push(checkboxs[i].name);\n      }\n    }\n\n    let finchecktype = [];\n\n    for (let i = 0; i < checkboxstype.length; i++) {\n      if (checkboxstype[i].check === true) {\n        finchecktype.push(checkboxstype[i].name);\n      }\n    }\n\n    if (message.length > 0) {\n      data = { ...data,\n        addinfo: message\n      };\n    }\n\n    const Name = data.DormName;\n    const Coordinates = {\n      lag: lat.current,\n      long: long.current\n    };\n    const contractInformation = {\n      Deposit: data.Deposit,\n      Price: data.Price,\n      ContractLength: data.length,\n      DormType: finchecktype,\n      Amenities: fincheck,\n      AdditionalInfo: data.addinfo\n    };\n    const schooll = school._id;\n    const obj = {\n      Name,\n      contractInformation: contractInformation,\n      images: productImg,\n      Coordinates,\n      Schools: schooll\n    };\n    dispatch(createDorm(obj));\n    console.log(obj);\n  };\n\n  const [Long, setLong] = useState(\"\");\n  const [Lat, setLat] = useState(\"\");\n  const mapContainerRef = useRef(null);\n  const lat = useRef(null);\n  const long = useRef(null);\n  const dispatch = useDispatch();\n  let {\n    id,\n    longg,\n    latt\n  } = useParams();\n  console.log(id);\n  let nso = id.replaceAll('_', ' ');\n  const school = useSelector(state => state.school);\n  console.log(school);\n  const history = useNavigate();\n\n  const logout = () => {\n    dispatch({\n      type: actionType.LOGOUT\n    });\n    history.push('/auth');\n    setUser(null);\n  };\n\n  useEffect(() => {\n    // longg = longg.replaceAll( '~','.')\n    // latt = latt.replaceAll('~', '.')\n    setUser(JSON.parse(localStorage.getItem('profile')));\n    const token = user === null || user === void 0 ? void 0 : user.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    if (!user) {\n      history('/auth');\n    } else {\n      const wa = dispatch(getSchoolByName(id));\n      console.log(wa);\n\n      if (wa == null) {\n        history('/');\n      } else {\n        if (longg < 90 && latt < 90 && longg > -90 && latt > -90) {\n          const map = new mapboxgl.Map({\n            container: mapContainerRef.current,\n            style: \"mapbox://styles/mapbox/streets-v11?optimize=true\",\n            //long then lat\n            center: [longg, latt],\n            zoom: 15.9,\n            maxZoom: 19\n          });\n          if (mapContainerRef.current.style.visibility === true) map.resize();\n          let mapMarkers = [];\n          map.on('click', e => {\n            mapMarkers.forEach(marker => marker.remove());\n            const marker = new mapboxgl.Marker({\n              color: \"#562F4A\"\n            });\n            marker.setLngLat(e.lngLat).addTo(map);\n            mapMarkers.push(marker);\n            console.log(\"lng:\" + marker._lngLat.lng + \"     Lat:\" + marker._lngLat.lat);\n            long.current = marker._lngLat.lng;\n            lat.current = marker._lngLat.lat;\n            console.log(lat);\n          });\n        } else {\n          history('/');\n        }\n      }\n    }\n  }, [dispatch, location]);\n  const [checkboxstype, setCheckboxstype] = useState([{\n    id: 70,\n    name: 'Single',\n    check: false\n  }, {\n    id: 71,\n    name: 'Double shared',\n    check: false\n  }, {\n    id: 72,\n    name: 'Triple shared',\n    check: false\n  }]);\n  const [checkboxs, setCheckboxs] = useState([{\n    id: 1,\n    name: 'Cleaning service',\n    check: false\n  }, {\n    id: 2,\n    name: 'Unlimited Wifi',\n    check: false\n  }, {\n    id: 3,\n    name: 'Shared lounge',\n    check: false\n  }, {\n    id: 4,\n    name: 'Hot water',\n    check: false\n  }, {\n    id: 5,\n    name: 'Hygiene Hose (shattafe)',\n    check: false\n  }, {\n    id: 6,\n    name: 'Joint kitchen',\n    check: false\n  }, {\n    id: 7,\n    name: 'Guests allowed',\n    check: false\n  }, {\n    id: 8,\n    name: 'Sleepovers',\n    check: false\n  }, {\n    id: 9,\n    name: 'Pet friendly',\n    check: false\n  }, {\n    id: 10,\n    name: '24/7 security',\n    check: false\n  }, {\n    id: 11,\n    name: 'Laundry',\n    check: false\n  }, {\n    id: 12,\n    name: 'Electricity 24/7',\n    check: false\n  }, {\n    id: 13,\n    name: 'AC',\n    check: false\n  }, {\n    id: 14,\n    name: 'Chauffage',\n    check: false\n  }, {\n    id: 16,\n    name: 'Electricity 10+ hours',\n    check: false\n  }]);\n\n  const handleCheck = id => {\n    setCheckboxs(prev => {\n      return prev.map(item => {\n        if (item.id === id) {\n          return { ...item,\n            check: !item.check\n          };\n        } else {\n          return { ...item\n          };\n        }\n      });\n    });\n  };\n\n  const handleChecktype = id => {\n    setCheckboxstype(prev => {\n      return prev.map(item => {\n        if (item.id === id) {\n          return { ...item,\n            check: !item.check\n          };\n        } else {\n          return { ...item\n          };\n        }\n      });\n    });\n  };\n\n  const rendertype = () => {\n    return checkboxstype.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pr chich inpt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inppr\",\n      key: item.id,\n      onClick: () => handleChecktype(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: item.name,\n      id: item.id,\n      value: item.check,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 21\n      }\n    }), item.check && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"before\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"after\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 25\n      }\n    }, \"\\u2714\"))), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }\n    }, item.name)));\n  };\n\n  const renderCheckboxs = () => {\n    return checkboxs.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pr chich inpt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inppr\",\n      key: item.id,\n      onClick: () => handleCheck(item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      name: item.name,\n      id: item.id,\n      value: item.check,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 21\n      }\n    }), item.check && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"before\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"after\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 25\n      }\n    }, \"\\u2714\"))), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }\n    }, item.name)));\n  };\n\n  const renderfilterstype = () => {\n    return checkboxstype.map(item => {\n      if (item.check) {\n        {\n          console.log(item.check);\n        }\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sax rounded-3\",\n          key: item.id,\n          onClick: () => handleChecktype(item.id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 21\n          }\n        }, item.name, \"  \\u2718\");\n      } else {\n        return null;\n      }\n    });\n  };\n\n  const renderfilters = () => {\n    return checkboxs.map(item => {\n      if (item.check) {\n        {\n          console.log(item.check);\n        }\n        return /*#__PURE__*/React.createElement(\"span\", {\n          className: \"sax rounded-3\",\n          key: item.id,\n          onClick: () => handleCheck(item.id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 21\n          }\n        }, item.name, \"  \\u2718\");\n      } else {\n        return null;\n      }\n    });\n  };\n\n  const [message, setMessage] = useState('');\n\n  const handleMessageChange = event => {\n    setMessage(event.target.value);\n  };\n\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bud\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 13\n    }\n  }), !user ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 17\n    }\n  }, \" You are not authorized to do that\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bod\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"\",\n    onSubmit: handleSubmit(submitForm),\n    encType: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 33\n    }\n  }, \"Add a dorm\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 33\n    }\n  }, \"Enter the full name, contract information, Location, and image/s of the dorm you would like to add.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp headm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 33\n    }\n  }, \"Dorme name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    autocomplete: \"off\",\n    name: \"DormName\",\n    id: \"Dormname\",\n    placeholder: \"Dorm name\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 33\n    }\n  }, (_errors$DormName = errors.DormName) === null || _errors$DormName === void 0 ? void 0 : _errors$DormName.message)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contractInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 33\n    }\n  }, \"Contract Information\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flexxx\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 41\n    }\n  }, \"Rent per month ($) \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Price\",\n    autocomplete: \"off\",\n    placeholder: \"$\",\n    id: \"Price\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 41\n    }\n  }, ((_errors$Price = errors.Price) === null || _errors$Price === void 0 ? void 0 : _errors$Price.message) ? \"Price must be a valid Number\" : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 41\n    }\n  }, \"Deposit ($) \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"Deposit\",\n    autocomplete: \"off\",\n    placeholder: \"$\",\n    id: \"Price\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 41\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 37\n    }\n  }, \"Contract length (in months) \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"length\",\n    autocomplete: \"off\",\n    placeholder: \"\",\n    id: \"Price\",\n    className: \"form-control form-input shadow-none rounded-3 pad\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inpt in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 37\n    }\n  }, \"Dorm Type\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"filters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 37\n    }\n  }, renderfilterstype()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"thingy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 37\n    }\n  }, \" \", rendertype())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addinfo \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 37\n    }\n  }, \"Amenities (features)\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 463,\n      columnNumber: 37\n    }\n  }, renderfilters()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 37\n    }\n  }, renderCheckboxs())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addinfo inp prices1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 37\n    }\n  }, \"Additional Information (optional) \"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    id: \"w3review\",\n    name: \"w3review\",\n    rows: \"3\",\n    cols: \"50\",\n    style: {\n      padding: 10,\n      fontSize: 15\n    },\n    onChange: handleMessageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pics\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 33\n    }\n  }, \"Add pictures of your dorm\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"fileInput\",\n    name: \"image\",\n    accept: \"image/*\",\n    onChange: handleProductImageUpload,\n    multiple: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 33\n    }\n  }, \"Please Select the exact location of your dorm.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Map\",\n    ref: mapContainerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    id: \"long\",\n    name: \"long\",\n    value: long.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    id: \"Lat\",\n    name: \"Lat\",\n    value: lat.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"back\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 33\n    }\n  }, \"\\xAB Back\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"continue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 33\n    }\n  }, \"Submit \\xBB\")))))));\n}\n\nexport default AddDorm;","map":{"version":3,"sources":["C:/Users/USER/OneDrive/Desktop/WebCourse/DormCritique/frontend/src/pages/AddDorm/AddDorm.jsx"],"names":["React","useRef","useEffect","useCallback","useState","Footer","Navbar","useForm","yupResolver","yup","ReactMapGL","Marker","actionType","decode","useDispatch","useSelector","useNavigate","useParams","useLocation","getSchoolByName","createDorm","mapboxgl","schema","object","shape","DormName","string","required","min","max","Price","number","test","value","context","originalValue","startsWith","accessToken","AddDorm","location","productImg","setProductImg","handleProductImageUpload","e","file","target","files","TransformFileData","console","log","reader","FileReader","readAsDataURL","onloadend","result","register","handleSubmit","errors","resolver","submitForm","data","Deposit","length","fincheck","i","checkboxs","check","push","name","finchecktype","checkboxstype","message","addinfo","Name","Coordinates","lag","lat","current","long","contractInformation","ContractLength","DormType","Amenities","AdditionalInfo","schooll","school","_id","obj","images","Schools","dispatch","Long","setLong","Lat","setLat","mapContainerRef","id","longg","latt","nso","replaceAll","state","history","logout","type","LOGOUT","setUser","JSON","parse","localStorage","getItem","token","user","decodedToken","exp","Date","getTime","wa","map","Map","container","style","center","zoom","maxZoom","visibility","resize","mapMarkers","on","forEach","marker","remove","color","setLngLat","lngLat","addTo","_lngLat","lng","setCheckboxstype","setCheckboxs","handleCheck","prev","item","handleChecktype","rendertype","renderCheckboxs","renderfilterstype","renderfilters","setMessage","handleMessageChange","event","padding","fontSize"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useCallback, useState } from 'react'\r\nimport Footer from '../../components/footer/Footer'\r\nimport Navbar from '../../components/navbar/Navbar'\r\nimport \"./AddDorm.css\"\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport * as yup from \"yup\";\r\nimport ReactMapGL, {\r\n    Marker,\r\n\r\n} from \"react-map-gl\"\r\nimport * as actionType from '../../constants/actionTypes';\r\nimport decode from 'jwt-decode';\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\r\nimport { getSchoolByName } from '../../actions/school'\r\nimport { createDorm } from '../../actions/dorm';\r\n\r\nimport mapboxgl from \"mapbox-gl\";\r\nconst schema = yup.object().shape({\r\n    DormName: yup.string().required('This field is required').min(3).max(50),\r\n    Price: yup.number().required().test(\r\n        'no-leading-zero',\r\n        'Leading zero is not allowed',\r\n        (value, context) => {\r\n            return context.originalValue && !context.originalValue.startsWith('0');\r\n        }\r\n    ),\r\n\r\n\r\n})\r\n\r\nmapboxgl.accessToken = \"pk.eyJ1Ijoid2FmaWNraCIsImEiOiJjbGNuZ2ttcnoxMm83M25zOTM0cGpkanlmIn0.8U0pDk8RKlhvQrxzgWsbxQ\"\r\nfunction AddDorm() {\r\n    const location = useLocation();\r\n\r\n    const [productImg, setProductImg] = useState(\"\");\r\n\r\n    const handleProductImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n\r\n        TransformFileData(file);\r\n        console.log(file)\r\n    };\r\n\r\n    const TransformFileData = (file) => {\r\n        const reader = new FileReader();\r\n\r\n        if (file) {\r\n            reader.readAsDataURL(file);\r\n            reader.onloadend = () => {\r\n                setProductImg(reader.result);\r\n            };\r\n        } else {\r\n            setProductImg(\"\");\r\n        }\r\n    };\r\n\r\n\r\n\r\n    const { register, handleSubmit, errors } = useForm({\r\n        resolver: yupResolver(schema),\r\n    });\r\n\r\n    const submitForm = (data) => {\r\n        if (data.Deposit === \"\") {\r\n            delete data.Deposit;\r\n        }\r\n        if (data.length === \"\") {\r\n            delete data.length;\r\n        }\r\n        let fincheck = [];\r\n        for (let i = 0; i < checkboxs.length; i++) {\r\n            if (checkboxs[i].check === true) {\r\n                fincheck.push(checkboxs[i].name)\r\n            }\r\n        }\r\n        let finchecktype = [];\r\n        for (let i = 0; i < checkboxstype.length; i++) {\r\n            if (checkboxstype[i].check === true) {\r\n                finchecktype.push(checkboxstype[i].name)\r\n            }\r\n        }\r\n        if (message.length > 0) {\r\n            data = { ...data, addinfo: message }\r\n        }\r\n        const Name = data.DormName\r\n        const Coordinates = {\r\n            lag: lat.current,\r\n            long: long.current,\r\n        }\r\n        const contractInformation = {\r\n            Deposit: data.Deposit,\r\n            Price: data.Price,\r\n            ContractLength: data.length,\r\n            DormType: finchecktype,\r\n            Amenities: fincheck,\r\n            AdditionalInfo: data.addinfo\r\n        }\r\n        const schooll = school._id\r\n\r\n\r\n        const obj = {\r\n            Name,\r\n            contractInformation: contractInformation,\r\n            images: productImg,\r\n            Coordinates,\r\n            Schools: schooll\r\n        }\r\n\r\n        dispatch(createDorm(obj))\r\n\r\n        console.log(obj);\r\n\r\n\r\n    };\r\n    const [Long, setLong] = useState(\"\");\r\n    const [Lat, setLat] = useState(\"\");\r\n\r\n\r\n\r\n    const mapContainerRef = useRef(null);\r\n    const lat = useRef(null);\r\n\r\n    const long = useRef(null);\r\n    const dispatch = useDispatch()\r\n    let { id, longg, latt } = useParams();\r\n    console.log(id)\r\n    let nso = id.replaceAll('_', ' ')\r\n\r\n\r\n    const school = useSelector((state) => state.school)\r\n    console.log(school)\r\n    const history = useNavigate();\r\n\r\n    const logout = () => {\r\n        dispatch({ type: actionType.LOGOUT });\r\n\r\n        history.push('/auth');\r\n\r\n        setUser(null);\r\n    };\r\n    useEffect(() => {\r\n        // longg = longg.replaceAll( '~','.')\r\n        // latt = latt.replaceAll('~', '.')\r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n        const token = user?.token;\r\n\r\n        if (token) {\r\n            const decodedToken = decode(token);\r\n\r\n            if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n\r\n        if (!user) {\r\n            history('/auth');\r\n\r\n        }\r\n        else {\r\n            \r\n            const wa=dispatch(getSchoolByName(id));\r\n            console.log(wa)\r\n            if (wa == null  ){\r\n                history('/')\r\n            }\r\n            else{\r\n                if (longg < 90 && latt < 90 && longg>-90 && latt>-90){\r\n                     const map = new mapboxgl.Map({\r\n                    container: mapContainerRef.current,\r\n                    style: \"mapbox://styles/mapbox/streets-v11?optimize=true\",\r\n                    //long then lat\r\n                    center: [longg, latt],\r\n                    zoom: 15.9,\r\n                    maxZoom: 19,\r\n\r\n                });\r\n\r\n\r\n                if (mapContainerRef.current.style.visibility === true) map.resize();\r\n\r\n                let mapMarkers = []\r\n\r\n\r\n\r\n                map.on('click', (e) => {\r\n                    mapMarkers.forEach((marker) => marker.remove())\r\n                    const marker = new mapboxgl.Marker({ color: \"#562F4A\" });\r\n                    marker.setLngLat(e.lngLat).addTo(map);\r\n                    mapMarkers.push(marker)\r\n                    console.log(\"lng:\" + marker._lngLat.lng + \"     Lat:\" + marker._lngLat.lat);\r\n                    long.current = marker._lngLat.lng\r\n                    lat.current = marker._lngLat.lat\r\n\r\n\r\n\r\n                    console.log(lat)\r\n                });\r\n                }\r\n                else{\r\n                    history('/')\r\n                    \r\n                }\r\n\r\n               \r\n            }\r\n\r\n\r\n\r\n\r\n\r\n           \r\n        }\r\n\r\n\r\n\r\n    }, [dispatch, location]);\r\n    const [checkboxstype, setCheckboxstype] = useState([\r\n        {\r\n            id: 70,\r\n            name: 'Single',\r\n            check: false\r\n        }, {\r\n            id: 71,\r\n            name: 'Double shared',\r\n            check: false\r\n        }, {\r\n            id: 72,\r\n            name: 'Triple shared',\r\n            check: false\r\n        }\r\n\r\n    ])\r\n\r\n    const [checkboxs, setCheckboxs] = useState([\r\n        {\r\n            id: 1,\r\n            name: 'Cleaning service',\r\n            check: false\r\n        }, {\r\n            id: 2,\r\n            name: 'Unlimited Wifi',\r\n            check: false\r\n\r\n        }, {\r\n            id: 3,\r\n            name: 'Shared lounge',\r\n            check: false\r\n        }, {\r\n            id: 4,\r\n            name: 'Hot water',\r\n            check: false\r\n\r\n        }, {\r\n            id: 5,\r\n            name: 'Hygiene Hose (shattafe)',\r\n            check: false\r\n        }, {\r\n            id: 6,\r\n            name: 'Joint kitchen',\r\n            check: false\r\n\r\n        }, {\r\n            id: 7,\r\n            name: 'Guests allowed',\r\n            check: false\r\n        }, {\r\n            id: 8,\r\n            name: 'Sleepovers',\r\n            check: false\r\n\r\n        }, {\r\n            id: 9,\r\n            name: 'Pet friendly',\r\n            check: false\r\n\r\n        }, {\r\n            id: 10,\r\n            name: '24/7 security',\r\n            check: false\r\n\r\n        }, {\r\n            id: 11,\r\n            name: 'Laundry',\r\n            check: false\r\n\r\n        },\r\n        {\r\n            id: 12,\r\n            name: 'Electricity 24/7',\r\n            check: false\r\n\r\n        }, {\r\n            id: 13,\r\n            name: 'AC',\r\n            check: false\r\n\r\n        }, {\r\n            id: 14,\r\n            name: 'Chauffage',\r\n            check: false\r\n\r\n        },\r\n        {\r\n            id: 16,\r\n            name: 'Electricity 10+ hours',\r\n            check: false\r\n\r\n        }\r\n\r\n    ]);\r\n    const handleCheck = (id) => {\r\n        setCheckboxs((prev) => {\r\n            return prev.map((item) => {\r\n                if (item.id === id) {\r\n                    return { ...item, check: !item.check };\r\n                } else {\r\n                    return { ...item };\r\n                }\r\n            });\r\n        });\r\n    };\r\n    const handleChecktype = (id) => {\r\n        setCheckboxstype((prev) => {\r\n            return prev.map((item) => {\r\n                if (item.id === id) {\r\n                    return { ...item, check: !item.check };\r\n                } else {\r\n                    return { ...item };\r\n                }\r\n            });\r\n        });\r\n    };\r\n    const rendertype = () => {\r\n        return checkboxstype.map(item => (\r\n            <div className='pr chich inpt'>\r\n                <div className=\"inppr\" key={item.id} onClick={() => handleChecktype(item.id)} >\r\n                    <input type=\"checkbox\" name={item.name} id={item.id} value={item.check} />\r\n                    {item.check && (<>\r\n                        <div className=\"before\"></div>\r\n                        <div className=\"after\">✔</div>\r\n\r\n                    </>\r\n                    )}\r\n                </div>\r\n                <label htmlFor={item.id}>{item.name}</label>\r\n            </div>\r\n        ));\r\n\r\n    }\r\n    const renderCheckboxs = () => {\r\n        return checkboxs.map(item => (\r\n            <div className='pr chich inpt'>\r\n                <div className=\"inppr\" key={item.id} onClick={() => handleCheck(item.id)} >\r\n                    <input type=\"checkbox\" name={item.name} id={item.id} value={item.check} />\r\n                    {item.check && (<>\r\n                        <div className=\"before\"></div>\r\n                        <div className=\"after\">✔</div>\r\n\r\n                    </>\r\n                    )}\r\n                </div>\r\n                <label htmlFor={item.id}>{item.name}</label>\r\n            </div>\r\n        ));\r\n    };\r\n\r\n    const renderfilterstype = () => {\r\n        return checkboxstype.map((item) => {\r\n            if (item.check) {\r\n                { console.log(item.check) }\r\n                return (\r\n\r\n                    <span className='sax rounded-3' key={item.id} onClick={() => handleChecktype(item.id)}>{item.name}  ✘</span>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n    }\r\n    const renderfilters = () => {\r\n        return checkboxs.map((item) => {\r\n            if (item.check) {\r\n                { console.log(item.check) }\r\n                return (\r\n\r\n                    <span className='sax rounded-3' key={item.id} onClick={() => handleCheck(item.id)}>{item.name}  ✘</span>\r\n                );\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n    }\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleMessageChange = event => {\r\n        setMessage(event.target.value);\r\n    };\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n        <span className='bud'>\r\n            <Navbar />\r\n            {!user ? (<>\r\n                <center> You are not authorized to do that</center>\r\n            </>) : (<>\r\n                <div className=\"bod\">\r\n                    <div className='card card7'>\r\n                        <form action=\"\" onSubmit={handleSubmit(submitForm)} encType=\"multipart/form-data\">\r\n                            <div className='head'>\r\n                                <h1>Add a dorm</h1>\r\n                                <p>Enter the full name, contract information, Location, and image/s of the dorm you would like to add.</p>\r\n                            </div>\r\n                            <div className=\"inp headm\">\r\n                                <h4>Dorme name</h4>\r\n                                <input type=\"text\" autocomplete=\"off\" name=\"DormName\" id=\"Dormname\" placeholder='Dorm name' className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n                                <span className='error'>{errors.DormName?.message}</span>\r\n\r\n                            </div>\r\n                            <div className=\"contractInfo\">\r\n                                <h3>Contract Information</h3>\r\n                                <div className=\"flexxx\">\r\n                                    <div className=\"inp prices1\">\r\n                                        <h4>Rent per month ($) </h4>\r\n\r\n                                        <input type=\"text\" name=\"Price\" autocomplete=\"off\" placeholder='$' id=\"Price\" className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n                                        <span className='error'>{errors.Price?.message ? \"Price must be a valid Number\" : \"\"}</span>\r\n\r\n                                    </div>\r\n                                    <div className=\"inp prices1\">\r\n                                        <h4>Deposit ($) </h4>\r\n\r\n                                        <input type=\"text\" name=\"Deposit\" autocomplete=\"off\" placeholder='$' id=\"Price\" className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div className=\"inp prices1\">\r\n                                    <h4>Contract length (in months) </h4>\r\n\r\n                                    <input type=\"text\" name=\"length\" autocomplete=\"off\" placeholder='' id=\"Price\" className='form-control form-input shadow-none rounded-3 pad' ref={register} />\r\n\r\n                                </div>\r\n                                <div className=\"inpt in\">\r\n                                    <h4>Dorm Type</h4>\r\n                                    <span className=\"filters\">\r\n                                        {renderfilterstype\r\n                                            ()}\r\n                                    </span>\r\n                                    <div className='thingy'> {rendertype()}</div>\r\n\r\n\r\n                                </div>\r\n                                <div className=\"addinfo \">\r\n                                    <h4>Amenities (features)</h4>\r\n                                    <div className=\"filters\">\r\n                                        {renderfilters\r\n                                            ()}\r\n                                    </div>\r\n                                    <div className=\"Check\">\r\n                                        {renderCheckboxs()}\r\n                                    </div>\r\n\r\n\r\n\r\n                                </div>\r\n\r\n                                <div className=\"addinfo inp prices1\">\r\n                                    <h4>Additional Information (optional) </h4>\r\n\r\n\r\n                                    <textarea type=\"text\" id=\"w3review\" name=\"w3review\" rows=\"3\" cols=\"50\" style={{ padding: 10, fontSize: 15 }} onChange={handleMessageChange} >\r\n\r\n                                    </textarea>\r\n                                </div>\r\n\r\n                            </div>\r\n                            {/* here */}\r\n                            <div className=\"pics\">\r\n                                <h3>Add pictures of your dorm</h3>\r\n                                <input\r\n                                    type=\"file\" id=\"fileInput\" name=\"image\" accept=\"image/*\" onChange={handleProductImageUpload}\r\n                                    multiple>\r\n                                </input>\r\n                            </div>\r\n                            <div className=\"location\">\r\n                                <h4>Please Select the exact location of your dorm.</h4>\r\n                                <div className=\"Map\" ref={mapContainerRef} >\r\n\r\n\r\n\r\n                                </div>\r\n\r\n                            </div>\r\n                            <input type=\"hidden\" id=\"long\" name=\"long\" value={long.current} />\r\n\r\n                            <input type=\"hidden\" id=\"Lat\" name=\"Lat\" value={lat.current} />\r\n\r\n                            <div className=\"buttons\">\r\n                                <button className='back'>&laquo; Back</button>\r\n                                <button type='submit' className='continue'>Submit &raquo;</button>\r\n\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n            </>)}\r\n\r\n\r\n\r\n        </span>\r\n    )\r\n}\r\n\r\nexport default AddDorm\r\n"]},"metadata":{},"sourceType":"module"}