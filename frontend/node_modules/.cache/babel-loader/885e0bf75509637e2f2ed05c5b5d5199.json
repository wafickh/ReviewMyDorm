{"ast":null,"code":"/**\n * Make a copy of a transform\n * @param tr\n */\nexport function cloneTransform(tr) {\n  const newTransform = tr.clone(); // Work around mapbox bug - this value is not assigned in clone(), only in resize()\n\n  newTransform.pixelsToGLUnits = tr.pixelsToGLUnits;\n  return newTransform;\n}\n/**\n * Capture a transform's current state\n * @param transform\n * @returns descriptor of the view state\n */\n\nexport function transformToViewState(tr) {\n  return {\n    longitude: tr.center.lng,\n    latitude: tr.center.lat,\n    zoom: tr.zoom,\n    pitch: tr.pitch,\n    bearing: tr.bearing,\n    padding: tr.padding\n  };\n}\n/* eslint-disable complexity */\n\n/**\n * Mutate a transform to match the given view state\n * @param transform\n * @param viewState\n * @returns true if the transform has changed\n */\n\nexport function applyViewStateToTransform(tr, props) {\n  const v = props.viewState || props;\n  let changed = false;\n\n  if ('longitude' in v && 'latitude' in v) {\n    const center = tr.center; // @ts-ignore\n\n    tr.center = new center.constructor(v.longitude, v.latitude);\n    changed = changed || center !== tr.center;\n  }\n\n  if ('zoom' in v) {\n    const zoom = tr.zoom;\n    tr.zoom = v.zoom;\n    changed = changed || zoom !== tr.zoom;\n  }\n\n  if ('bearing' in v) {\n    const bearing = tr.bearing;\n    tr.bearing = v.bearing;\n    changed = changed || bearing !== tr.bearing;\n  }\n\n  if ('pitch' in v) {\n    const pitch = tr.pitch;\n    tr.pitch = v.pitch;\n    changed = changed || pitch !== tr.pitch;\n  }\n\n  if (v.padding && !tr.isPaddingEqual(v.padding)) {\n    changed = true;\n    tr.padding = v.padding;\n  }\n\n  return changed;\n}","map":{"version":3,"sources":["../../../src/utils/transform.ts"],"names":[],"mappings":"AAGA;;;;AAIA,OAAM,SAAU,cAAV,CAAyB,EAAzB,EAAsC;AAC1C,QAAM,YAAY,GAAG,EAAE,CAAC,KAAH,EAArB,CAD0C,CAE1C;;AACA,EAAA,YAAY,CAAC,eAAb,GAA+B,EAAE,CAAC,eAAlC;AACA,SAAO,YAAP;AACD;AAED;;;;;;AAKA,OAAM,SAAU,oBAAV,CAA+B,EAA/B,EAA4C;AAChD,SAAO;AACL,IAAA,SAAS,EAAE,EAAE,CAAC,MAAH,CAAU,GADhB;AAEL,IAAA,QAAQ,EAAE,EAAE,CAAC,MAAH,CAAU,GAFf;AAGL,IAAA,IAAI,EAAE,EAAE,CAAC,IAHJ;AAIL,IAAA,KAAK,EAAE,EAAE,CAAC,KAJL;AAKL,IAAA,OAAO,EAAE,EAAE,CAAC,OALP;AAML,IAAA,OAAO,EAAE,EAAE,CAAC;AANP,GAAP;AAQD;AAED;;AACA;;;;;;;AAMA,OAAM,SAAU,yBAAV,CAAoC,EAApC,EAAmD,KAAnD,EAAqE;AACzE,QAAM,CAAC,GAAuB,KAAK,CAAC,SAAN,IAAmB,KAAjD;AACA,MAAI,OAAO,GAAG,KAAd;;AAEA,MAAI,eAAe,CAAf,IAAoB,cAAc,CAAtC,EAAyC;AACvC,UAAM,MAAM,GAAG,EAAE,CAAC,MAAlB,CADuC,CAEvC;;AACA,IAAA,EAAE,CAAC,MAAH,GAAY,IAAI,MAAM,CAAC,WAAX,CAAuB,CAAC,CAAC,SAAzB,EAAoC,CAAC,CAAC,QAAtC,CAAZ;AACA,IAAA,OAAO,GAAG,OAAO,IAAI,MAAM,KAAK,EAAE,CAAC,MAAnC;AACD;;AACD,MAAI,UAAU,CAAd,EAAiB;AACf,UAAM,IAAI,GAAG,EAAE,CAAC,IAAhB;AACA,IAAA,EAAE,CAAC,IAAH,GAAU,CAAC,CAAC,IAAZ;AACA,IAAA,OAAO,GAAG,OAAO,IAAI,IAAI,KAAK,EAAE,CAAC,IAAjC;AACD;;AACD,MAAI,aAAa,CAAjB,EAAoB;AAClB,UAAM,OAAO,GAAG,EAAE,CAAC,OAAnB;AACA,IAAA,EAAE,CAAC,OAAH,GAAa,CAAC,CAAC,OAAf;AACA,IAAA,OAAO,GAAG,OAAO,IAAI,OAAO,KAAK,EAAE,CAAC,OAApC;AACD;;AACD,MAAI,WAAW,CAAf,EAAkB;AAChB,UAAM,KAAK,GAAG,EAAE,CAAC,KAAjB;AACA,IAAA,EAAE,CAAC,KAAH,GAAW,CAAC,CAAC,KAAb;AACA,IAAA,OAAO,GAAG,OAAO,IAAI,KAAK,KAAK,EAAE,CAAC,KAAlC;AACD;;AACD,MAAI,CAAC,CAAC,OAAF,IAAa,CAAC,EAAE,CAAC,cAAH,CAAkB,CAAC,CAAC,OAApB,CAAlB,EAAgD;AAC9C,IAAA,OAAO,GAAG,IAAV;AACA,IAAA,EAAE,CAAC,OAAH,GAAa,CAAC,CAAC,OAAf;AACD;;AACD,SAAO,OAAP;AACD","sourceRoot":"","sourcesContent":["/**\n * Make a copy of a transform\n * @param tr\n */\nexport function cloneTransform(tr) {\n    const newTransform = tr.clone();\n    // Work around mapbox bug - this value is not assigned in clone(), only in resize()\n    newTransform.pixelsToGLUnits = tr.pixelsToGLUnits;\n    return newTransform;\n}\n/**\n * Capture a transform's current state\n * @param transform\n * @returns descriptor of the view state\n */\nexport function transformToViewState(tr) {\n    return {\n        longitude: tr.center.lng,\n        latitude: tr.center.lat,\n        zoom: tr.zoom,\n        pitch: tr.pitch,\n        bearing: tr.bearing,\n        padding: tr.padding\n    };\n}\n/* eslint-disable complexity */\n/**\n * Mutate a transform to match the given view state\n * @param transform\n * @param viewState\n * @returns true if the transform has changed\n */\nexport function applyViewStateToTransform(tr, props) {\n    const v = props.viewState || props;\n    let changed = false;\n    if ('longitude' in v && 'latitude' in v) {\n        const center = tr.center;\n        // @ts-ignore\n        tr.center = new center.constructor(v.longitude, v.latitude);\n        changed = changed || center !== tr.center;\n    }\n    if ('zoom' in v) {\n        const zoom = tr.zoom;\n        tr.zoom = v.zoom;\n        changed = changed || zoom !== tr.zoom;\n    }\n    if ('bearing' in v) {\n        const bearing = tr.bearing;\n        tr.bearing = v.bearing;\n        changed = changed || bearing !== tr.bearing;\n    }\n    if ('pitch' in v) {\n        const pitch = tr.pitch;\n        tr.pitch = v.pitch;\n        changed = changed || pitch !== tr.pitch;\n    }\n    if (v.padding && !tr.isPaddingEqual(v.padding)) {\n        changed = true;\n        tr.padding = v.padding;\n    }\n    return changed;\n}\n//# sourceMappingURL=transform.js.map"]},"metadata":{},"sourceType":"module"}